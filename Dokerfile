FROM python:3.10-slim

RUN apt-get update && \
    apt-get install -y git curl && \
    pip install --upgrade pip && \
    pip install flask gunicorn argostranslate

WORKDIR /app

# Copiar el código del servidor al contenedor
COPY . .

# Descargar modelo EN → ES
RUN python3 -c "\
import argostranslate.package;\
pkg_path = argostranslate.package.download_package('en', 'es');\
argostranslate.package.install_from_path(pkg_path)"

EXPOSE 5000

CMD ["gunicorn", "--bind", "0.0.0.0:5000", "app:app"]
